<style>
  .maindiv {
    color: black;
    background: linear-gradient(25deg, rgb(201,202,204), rgb(234,234,234));
  }

  #mi-cu-title {
    position: absolute;
    top: 15%;
  }

  #mi-cu-container {
    position: absolute;
    top: 33%;
    width: 120vw; height: 40vh;
    overflow-y: scroll;
    scroll-behavior: smooth;
  }

  .mi-cu-panel {
    text-align: center;
    white-space: nowrap;
  }

  .mi-cu-panel .mi-cu-img {
    height: 40vh;
    padding: 0.4em;
    display: inline-block;
  }

  .cu-sections {
    position: absolute;
    top: 50%; right: 4%;
    transform: translateY(-40%);
    z-index: 2;
  }

  a.cu-section {
    font-size: 0.9em;
    color: gray;
    line-height: 1.5em;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .cu-section.active {
    color: black;
  }

  .mi-cu-img { position: relative; }

  .mi-cu-img .middle {
    transition: .3s ease;
    opacity: 0;
    line-height: 1.5em;
  }

  .mi-cu-img img {
    height: calc(100% - 0.8em);
    transition: .3s ease;
  }

  .mi-cu-img:hover img { opacity: 0.3; }
  .mi-cu-img:hover .middle { opacity: 1; }

  .mi-cu-name {
    font-weight: 900;
    font-size: 1.4em;
  }

  .mi-cu-img a, .mi-cu-num-template { text-decoration: none; color: black; }
  .mi-cu-img a:hover { text-decoration: underline; }

  .mi-cu-num-template {
    border: none;
    color: #555;
    transition: 0.3s ease;
  }
  .mi-cu-num-template.active {
    background-color: white;
    color: black;
  }

  .mi-cu-name { max-width: 100%; white-space: normal; }

  .mi-cu-dep-name { display: none; }

  @media (max-width: 1200px) {
    .mi-cu-dep-name {
      position: relative;
      left: calc(50% - 100px);
      width: 200px;
      text-align: center;
      display: inline-block;
      margin: 10px;
      font-size: 1.2em; font-weight: 900;
    }

    #mi-cu-container {
      height: calc(40vh + 20px + 1.3em);
    }
  }

  @media (max-width: 900px) {
    #mi-cu-title { top: 40px; font-size: 2.5em; }
    .mi-cu-panel { white-space: normal; text-align: center;}
    .mi-cu-panel, .mi-cu-img {
      box-sizing: border-box;
      width: 100%;
    }
    .mi-cu-img  { height: auto !important; }
    #mi-cu-container {
      top: calc(40px + 3.2em);
      height: calc(100vh - 40px - 3.2em);
      padding: 0;
      width: auto;
    }
    .mi-cu-indices { display: none; }
  }
</style>

<div class="full-body maindiv">
  <div id="mi-cu-title" class="title h-middle">CONTACT US</div>

  <!-- Side menu -->
  <div class="cu-sections min-1200px">
    <ul id="cu-sections-ul">
      <li id="cu-section-template"><a class="cu-section" href="#cu-compi">COMPETITIONS &amp; LYP</a></li>
    </ul>
  </div>

  <!-- Template for image -->
  <div class="mi-cu-img mi-cu-img-template">
    <img class="mi-cu-cg-img" src="images/people/pranil.JPG" />
    <div class="middle vh-middle">
      <div class="mi-cu-name">PRANIL JAIN</div>
      <p class="mi-cu-dept">COMPETITIONS &amp; LYP</p> <br />
      <p>
        <a class="mi-cu-tel" href="tel:+91-9876543210">+91-9876543210</a><br/>
        <a class="mi-cu-email" href="mailto:pranil@moodi.org">pranil@moodi.org</a>
      </p>
    </div>
  </div>

  <!-- Main container -->
  <div id="mi-cu-container" class="h-middle"></div>

  <!-- Numbering -->
  <div class="mi-cu-indices siema-indices">
    <a class="mi-cu-num-template siema-num-template"></a>
  </div>
</div>

<script>
  addInvert();

  var currentElem = $('#cu-compi');

  $('#mi-cu-container').on('scroll', function() {
    var top = $(this).children().first();
    $(this).children().each(function(){
        var offset = $(this).offset().top;
        if(offset >= 0 && offset < $(this).height()){
            top = $(this);
            return false;
        }
    });

    if (top.attr('id') != currentElem.attr('id')) {
      console.log(top.attr('id'));
      currentElem = top;
      $('.mi-cu-num-template').removeClass('active');
      $('.cu-section').removeClass('active');
      $('a[href="#' + top.attr('id') + '"]').addClass('active');
    }
  });

  {{include1}}

  var templ = $(".mi-cu-img-template");
  var sectempl = $('#cu-section-template');
  var numtempl = $('.mi-cu-num-template');
  var activeDone = false;
  var index = 1;

  for (const team of teams) {
    var section = document.createElement('div');
    $(section).addClass('mi-cu-panel')
              .attr('id', 'cu-' + team.short_name);

    $(document.createElement('div')).addClass('mi-cu-dep-name')
                                    .html(team.name)
                                    .appendTo('#mi-cu-container');

    for (const cg of team.people) {
      var newnode = templ.clone();
      newnode.find('.mi-cu-cg-img').attr('src', 'images/people/' + cg.image);
      newnode.find('.mi-cu-name').html(cg.name);
      if ('department' in cg) {
        newnode.find('.mi-cu-dept').html(cg.department);
      } else {
        newnode.find('.mi-cu-dept').html(team.name);
      }
      newnode.find('.mi-cu-tel').html(cg.tel);
      newnode.find('.mi-cu-tel').attr('href', 'tel:' + cg.tel);
      newnode.find('.mi-cu-email').html(cg.email);
      newnode.find('.mi-cu-email').attr('href', 'email:' + cg.email);
      newnode.appendTo($(section));
    }

    $(section).appendTo($("#mi-cu-container"));

    var secnode = sectempl.clone();
    secnode.find('.cu-section').attr('href', '#cu-' + team.short_name);
    secnode.find('.cu-section').html(team.name);
    secnode.appendTo($('#cu-sections-ul'))

    var numnode = numtempl.clone();
    numnode.html(index);
    numnode.attr('href', '#cu-' + team.short_name);
    index++;
    numnode.appendTo('.mi-cu-indices');

    if (!activeDone) {
      activeDone = true;
      secnode.find('.cu-section').addClass('active');
      numnode.addClass('active');
    }
  }
  templ.remove();
  sectempl.remove();
  numtempl.remove();

</script>
